class TicTacToeGame{constructor(){this.hitCounter=0,this.gameIsEnd=!1,this.winSnd=new Audio("sound/win.mp3"),this.loseSnd=new Audio("sound/lose.mp3"),this.clickedOneMoreTime=!1,this.currentPlayerSymbol="X",this.initializeGame()}initializeGame(){$("#game-table td").click(e=>{this.handlePlayerMove(e)}).on("mouseup",()=>{this.playComputer()})}handlePlayerMove(e){let t=$(e.target),r=t.text();if(0!==r.length||this.gameIsEnd)this.clickedOneMoreTime=!0,this.playComputer();else{let s=t.attr("row"),o=t.attr("column");if(!this.gameIsEnd){this.placeSymbol(this.currentPlayerSymbol,t,s,o),this.hitCounter++;let n=this.checkGameStatus(this.currentPlayerSymbol);if(n)return this.endGame(this.currentPlayerSymbol),!1;this.currentPlayerSymbol="X"===this.currentPlayerSymbol?"O":"X","O"===this.currentPlayerSymbol&&this.playComputer()}}}placeSymbol(e,t,r,s){t.text(e),t.css("font-weight","bold"),$("#game-steps").append("<b>"+(this.hitCounter+1)+". </b>"+("X"===e?"You":"Computer")+" put the "+e+" to "+r+". row , "+s+". column<br>")}playComputer(){if(!this.gameIsEnd&&"O"===this.currentPlayerSymbol&&!this.clickedOneMoreTime){let e,t;do e=Math.floor(3*Math.random()+1),t=Math.floor(3*Math.random()+1);while(""!==$("#"+e+"x"+t).text());let r=$("#"+e+"x"+t);this.placeSymbol("O",r,e,t),this.hitCounter++;let s=this.checkGameStatus("O");if(s){this.endGame("O");return}this.currentPlayerSymbol="X",this.clickedOneMoreTime=!1}}checkGameStatus(e){for(let t of[["1x1","1x2","1x3"],["2x1","2x2","2x3"],["3x1","3x2","3x3"],["1x1","2x1","3x1"],["1x2","2x2","3x2"],["1x3","2x3","3x3"],["1x1","2x2","3x3"],["1x3","2x2","3x1"]]){let[r,s,o]=t;if($("#"+r).text()===e&&$("#"+s).text()===e&&$("#"+o).text()===e)return $(`#${r}`).css("background-color","red"),$(`#${s}`).css("background-color","red"),$(`#${o}`).css("background-color","red"),!0}return!1}endGame(e){this.gameIsEnd=!0,"X"===e?(this.winSnd.play(),$("#game-steps").append("<br><mytext><strong>GAME IS OVER</strong>.<strong style='color:red;'> YOU WIN !</strong></mytext>")):"O"===e?(this.loseSnd.play(),$("#game-steps").append("<br><mytext><strong>GAME IS OVER</strong>.<strong style='color:red;'> COMPUTER WIN !</strong></mytext>")):$("#game-steps").append("<br><mytext><strong>GAME IS OVER</strong>.<strong style='color:red;'> IT'S A DRAW !</strong></mytext>")}}$(document).ready(()=>{new TicTacToeGame});